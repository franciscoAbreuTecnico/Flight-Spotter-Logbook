spring:
  application:
    name: flight-spotter-logbook
  datasource:
    # Heroku provides JDBC_DATABASE_URL; fall back to SPRING_DATASOURCE_URL for local dev
    url: ${JDBC_DATABASE_URL:${SPRING_DATASOURCE_URL}}
    username: ${SPRING_DATASOURCE_USERNAME:}
    password: ${SPRING_DATASOURCE_PASSWORD:}
  jpa:
    hibernate:
      ddl-auto: validate
    properties:
      hibernate.dialect: org.hibernate.dialect.PostgreSQLDialect
  flyway:
    enabled: true
  cache:
    type: caffeine
  servlet:
    multipart:
      max-file-size: 25MB
      max-request-size: 25MB

server:
  port: ${PORT:8080}

# Actuator endpoints for health checks (Render requires /actuator/health)
management:
  endpoints:
    web:
      exposure:
        include: health,info
  endpoint:
    health:
      show-details: never

logging:
  level:
    org.springframework.security: INFO

jwt:
  jwk-set-uri: ${JWKS_URI}
  role-claim-field: ${ROLE_CLAIM_FIELD:role}

cors:
  allowed-origins: ${CORS_ALLOWED_ORIGINS:http://localhost:3000,http://frontend:3000}

cloudinary:
  cloud-name: ${CLOUDINARY_CLOUD_NAME}
  api-key: ${CLOUDINARY_API_KEY}
  api-secret: ${CLOUDINARY_API_SECRET}

opensky:
  client-id: ${OPENSKY_CLIENT_ID:}
  client-secret: ${OPENSKY_CLIENT_SECRET:}
  base-url: https://opensky-network.org/api

caffeine:
  spec: maximumSize=1000,expireAfterWrite=1h